(function(){window.form2object=function(l,o,d){if(typeof d=="undefined"||d==null){d=true}if(typeof o=="undefined"||o==null){o="."}l=typeof l=="string"?document.getElementById(l):l;var f=b(l);var q={};var m={};for(var k=0;k<f.length;k++){var s=f[k].value;if(d&&s===""){continue}var e=f[k].name;var h=e.split(o);var r=q;for(var g=0;g<h.length;g++){var t=h[g];var n;if(t.indexOf("[]")>-1&&g==h.length-1){n=t.substr(0,t.indexOf("["));if(!r[n]){r[n]=[]}r[n].push(s)}else{if(t.indexOf("[")>-1){n=t.substr(0,t.indexOf("["));var p=t.replace(/^[a-z]+\[|\]$/gi,"");if(!m[n]){m[n]={}}if(!r[n]){r[n]=[]}if(g==h.length-1){r[n].push(s)}else{if(!m[n][p]){r[n].push({});m[n][p]=r[n][r[n].length-1]}}r=m[n][p]}else{if(g<h.length-1){if(!r[t]){r[t]={}}r=r[t]}else{r[t]=s}}}}}return q};function b(f){var h=[];var e=f.firstChild;while(e){if(e.nodeName.match(/INPUT|SELECT|TEXTAREA/i)){var g=a(e);if(g!==null){h.push({name:e.name,value:g})}}else{var d=b(e);h=h.concat(d)}e=e.nextSibling}return h}function a(d){switch(d.nodeName){case"INPUT":case"TEXTAREA":switch(d.type.toLowerCase()){case"radio":case"checkbox":if(d.checked){return d.value}break;case"button":case"reset":case"submit":case"image":return"";break;default:return d.value;break}break;case"SELECT":return c(d);break;default:break}return null}function c(h){var d=h.multiple;if(!d){return h.value}var j=[];for(var g=h.getElementsByTagName("option"),f=0,e=g.length;f<e;f++){if(g[f].selected){j.push(g[f].value)}}return j}window.form2json=window.form2object})();